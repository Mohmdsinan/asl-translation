<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Text to Sign Language Translator</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1> Advanced Sign Language Translator</h1>
            <p>Convert text to ASL phrases and fingerspelling</p>
        </div>

        <div class="input-section">
            <div class="input-group">
                <label for="textInput">Enter text to translate:</label>
                <textarea 
                    id="textInput" 
                    class="text-input" 
                    placeholder="Type your message here... (e.g., How are you, Hello, Thank you)"
                    maxlength="200"
                ></textarea>
            </div>

            <div class="mode-selector">
                <button class="mode-btn active" data-mode="auto">üéØ Auto Mode</button>
                <button class="mode-btn" data-mode="phrases">üì∫ ASL Phrases</button>
                <button class="mode-btn" data-mode="fingerspell">‚úã Fingerspelling</button>
            </div>

            <div class="controls">
                <button id="translateBtn" class="translate-btn" disabled>
                    ü§ü Translate to Sign Language
                </button>
            </div>

            <div class="quick-phrases">
                <p>Quick phrases:</p>
                <div class="phrase-buttons">
                    <button class="phrase-btn asl-phrase" onclick="setPhrase('How are you')">üì∫ How are you</button>
                    <button class="phrase-btn asl-phrase" onclick="setPhrase('Hello')">üì∫ Hello</button>
                    <button class="phrase-btn asl-phrase" onclick="setPhrase('Thank you')">üì∫ Thank you</button>
                    <button class="phrase-btn" onclick="setPhrase('Good morning')">‚úã Good morning</button>
                    <button class="phrase-btn" onclick="setPhrase('Nice to meet you')">‚úã Nice to meet you</button>
                    <button class="phrase-btn" onclick="setPhrase('Have a great day')">‚úã Have a great day</button>
                </div>
            </div>
        </div>

        <div id="translationSection" class="translation-section">
            <div id="placeholder" class="placeholder">
                <p>üëã Your sign language translation will appear here</p>
                <p style="margin-top: 10px; font-size: 1rem; color: #999;">
                    Enter some text above and select a translation mode
                </p>
            </div>

            <!-- Video Section for ASL Phrases -->
            <div id="videoSection" class="video-section" style="display: none;">
                <div class="phrase-info">
                    <h3 id="phraseTitle">ASL Phrase</h3>
                    <p id="phraseDescription">Watch the video to see how this phrase is signed in ASL.</p>
                </div>
                
                <video id="aslVideo" class="asl-video" controls>
                    <source src="" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
                
                <div class="video-controls">
                    <button class="video-btn" onclick="replayVideo()">üîÑ Replay</button>
                    <button class="video-btn" onclick="slowVideo()">üêå Slow (0.5x)</button>
                    <button class="video-btn" onclick="normalVideo()">‚ñ∂Ô∏è Normal</button>
                </div>
            </div>

            <!-- Fingerspelling Section -->
            <div id="fingerspellSection" style="display: none;">
                <div id="currentPhrase" class="phrase-info" style="display: none;">
                    <h3>Fingerspelling:</h3>
                    <p id="phraseDisplay"></p>
                </div>

                <div id="progressBar" class="progress-bar" style="display: none;">
                    <div id="progressFill" class="progress-fill"></div>
                </div>

                <div id="signDisplay" class="sign-display"></div>

                <div id="fingerspellControls" class="fingerspell-controls" style="display: none;">
                    <button id="playBtn" class="control-btn">‚ñ∂Ô∏è Play</button>
                    <button id="pauseBtn" class="control-btn">‚è∏Ô∏è Pause</button>
                    <button id="restartBtn" class="control-btn">üîÑ Restart</button>
                </div>

                <div class="speed-control" id="speedControlSection" style="display: none;">
                    <label for="speedSlider">Fingerspelling Speed:</label>
                    <input 
                        type="range" 
                        id="speedSlider" 
                        class="speed-slider" 
                        min="0.5" 
                        max="3" 
                        step="0.1" 
                        value="1"
                    >
                    <span id="speedValue">1x</span>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ASL Alphabet mapping
        const ASL_ALPHABET = {
            'A': { emoji: 'üñêÔ∏è', description: 'Closed fist' },
            'B': { emoji: 'üñêÔ∏è', description: 'Flat hand' },
            'C': { emoji: 'ü§è', description: 'C shape' },
            'D': { emoji: '‚òùÔ∏è', description: 'Pointing up' },
            'E': { emoji: '‚úä', description: 'Closed fist down' },
            'F': { emoji: 'üëå', description: 'OK sign' },
            'G': { emoji: 'üëâ', description: 'Pointing side' },
            'H': { emoji: '‚úåÔ∏è', description: 'Two fingers' },
            'I': { emoji: 'ü§ô', description: 'Pinky up' },
            'J': { emoji: 'ü§ô', description: 'Pinky hook' },
            'K': { emoji: '‚úåÔ∏è', description: 'V with thumb' },
            'L': { emoji: 'ü§ü', description: 'L shape' },
            'M': { emoji: '‚úä', description: 'Fist with thumb' },
            'N': { emoji: '‚úä', description: 'Two fingers down' },
            'O': { emoji: 'üëå', description: 'Circle' },
            'P': { emoji: 'üëâ', description: 'Pointing down' },
            'Q': { emoji: 'üëâ', description: 'Q shape' },
            'R': { emoji: 'ü§û', description: 'Crossed fingers' },
            'S': { emoji: '‚úä', description: 'Fist' },
            'T': { emoji: '‚úä', description: 'Thumb between' },
            'U': { emoji: '‚úåÔ∏è', description: 'Two up' },
            'V': { emoji: '‚úåÔ∏è', description: 'Victory' },
            'W': { emoji: 'ü§ü', description: 'Three fingers' },
            'X': { emoji: '‚òùÔ∏è', description: 'Crooked finger' },
            'Y': { emoji: 'ü§ô', description: 'Hang loose' },
            'Z': { emoji: '‚òùÔ∏è', description: 'Z motion' },
            ' ': { emoji: '‚úã', description: 'Space/pause' }
        };

        class SignLanguageTranslator {
            constructor() {
                this.textInput = document.getElementById('textInput');
                this.translateBtn = document.getElementById('translateBtn');
                this.translationSection = document.getElementById('translationSection');
                this.placeholder = document.getElementById('placeholder');
                this.videoSection = document.getElementById('videoSection');
                this.fingerspellSection = document.getElementById('fingerspellSection');
                this.aslVideo = document.getElementById('aslVideo');
                
                this.currentMode = 'auto';
                this.isPlaying = false;
                this.currentIndex = 0;
                this.currentText = '';
                
                this.initializeEventListeners();
            }

            initializeEventListeners() {
                this.translateBtn.addEventListener('click', () => this.translateText());
                
                this.textInput.addEventListener('input', () => {
                    this.translateBtn.disabled = this.textInput.value.trim().length === 0;
                });

                // Mode selector
                document.querySelectorAll('.mode-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        document.querySelectorAll('.mode-btn').forEach(b => b.classList.remove('active'));
                        e.target.classList.add('active');
                        this.currentMode = e.target.dataset.mode;
                    });
                });

                // Fingerspelling controls
                const playBtn = document.getElementById('playBtn');
                const pauseBtn = document.getElementById('pauseBtn');
                const restartBtn = document.getElementById('restartBtn');
                const speedSlider = document.getElementById('speedSlider');
                const speedValue = document.getElementById('speedValue');

                if (playBtn) playBtn.addEventListener('click', () => this.playFingerspelling());
                if (pauseBtn) pauseBtn.addEventListener('click', () => this.pauseFingerspelling());
                if (restartBtn) restartBtn.addEventListener('click', () => this.restartFingerspelling());
                if (speedSlider) {
                    speedSlider.addEventListener('input', (e) => {
                        speedValue.textContent = e.target.value + 'x';
                    });
                }
            }

            translateText() {
                const text = this.textInput.value.trim().toLowerCase();
                
                if (!text) {
                    alert('Please enter some text to translate');
                    return;
                }

                this.setupDisplay();

                // Auto mode: check if phrase exists, otherwise fingerspell
                if (this.currentMode === 'auto') {
                    if (ASL_PHRASES[text]) {
                        this.showASLPhrase(text);
                    } else {
                        this.showFingerspelling(text);
                    }
                } else if (this.currentMode === 'phrases') {
                    this.showASLPhrase(text);
                } else {
                    this.showFingerspelling(text);
                }
            }

            setupDisplay() {
                this.placeholder.style.display = 'none';
                this.translationSection.classList.add('active');
            }

            showASLPhrase(text) {
                this.videoSection.style.display = 'block';
                this.fingerspellSection.style.display = 'none';

                const phraseData = ASL_PHRASES[text];
                
                if (phraseData) {
                    document.getElementById('phraseTitle').textContent = phraseData.title;
                    document.getElementById('phraseDescription').textContent = phraseData.description;
                    this.aslVideo.src = phraseData.video;
                    this.aslVideo.load();
                    this.aslVideo.play();
                } else {
                    document.getElementById('phraseTitle').textContent = 'Phrase Not Available';
                    document.getElementById('phraseDescription').textContent = 
                        `Sorry, we don't have an ASL video for "${text}". Try fingerspelling mode instead, or use one of the available phrases.`;
                    this.aslVideo.src = '';
                }
            }

            showFingerspelling(text) {
                this.videoSection.style.display = 'none';
                this.fingerspellSection.style.display = 'block';
                
                this.currentText = text.toUpperCase();
                this.currentIndex = 0;
                
                document.getElementById('currentPhrase').style.display = 'block';
                document.getElementById('phraseDisplay').textContent = this.currentText;
                document.getElementById('fingerspellControls').style.display = 'flex';
                document.getElementById('speedControlSection').style.display = 'flex';
                
                this.createSignCards();
                this.playFingerspelling();
            }

            createSignCards() {
                const signDisplay = document.getElementById('signDisplay');
                signDisplay.innerHTML = '';
                
                for (let i = 0; i < this.currentText.length; i++) {
                    const char = this.currentText[i];
                    const signData = ASL_ALPHABET[char] || ASL_ALPHABET[' '];
                    
                    const card = document.createElement('div');
                    card.className = 'sign-card';
                    card.id = `sign-${i}`;
                    
                    card.innerHTML = `
                        <span class="sign-emoji">${signData.emoji}</span>
                        <div class="sign-letter">${char === ' ' ? 'SPACE' : char}</div>
                        <div class="sign-description">${signData.description}</div>
                    `;
                    
                    signDisplay.appendChild(card);
                }
            }

            async playFingerspelling() {
                if (this.isPlaying) return;
                
                this.isPlaying = true;
                const playBtn = document.getElementById('playBtn');
                const pauseBtn = document.getElementById('pauseBtn');
                
                if (playBtn) playBtn.disabled = true;
                if (pauseBtn) pauseBtn.disabled = false;
                
                const speedSlider = document.getElementById('speedSlider');
                const speed = parseFloat(speedSlider.value);
                const delay = 1200 / speed;
                
                for (let i = this.currentIndex; i < this.currentText.length; i++) {
                    if (!this.isPlaying) break;
                    
                    this.currentIndex = i;
                    this.highlightCurrentSign(i);
                    this.updateProgress();
                    
                    await this.sleep(delay);
                }
                
                if (this.isPlaying) {
                    this.fingerspellingComplete();
                }
            }

            pauseFingerspelling() {
                this.isPlaying = false;
                const playBtn = document.getElementById('playBtn');
                const pauseBtn = document.getElementById('pauseBtn');
                
                if (playBtn) playBtn.disabled = false;
                if (pauseBtn) pauseBtn.disabled = true;
            }

            restartFingerspelling() {
                this.isPlaying = false;
                this.currentIndex = 0;
                this.clearHighlights();
                this.updateProgress();
                
                const playBtn = document.getElementById('playBtn');
                const pauseBtn = document.getElementById('pauseBtn');
                
                if (playBtn) playBtn.disabled = false;
                if (pauseBtn) pauseBtn.disabled = true;
            }

            fingerspellingComplete() {
                this.isPlaying = false;
                const playBtn = document.getElementById('playBtn');
                const pauseBtn = document.getElementById('pauseBtn');
                
                if (playBtn) playBtn.disabled = false;
                if (pauseBtn) pauseBtn.disabled = true;
                
                setTimeout(() => {
                    this.clearHighlights();
                    this.currentIndex = 0;
                    this.updateProgress();
                }, 1000);
            }

            highlightCurrentSign(index) {
                this.clearHighlights();
                const currentCard = document.getElementById(`sign-${index}`);
                if (currentCard) {
                    currentCard.classList.add('current');
                }
            }

            clearHighlights() {
                const cards = document.querySelectorAll('.sign-card');
                cards.forEach(card => card.classList.remove('current'));
            }

            updateProgress() {
                const progressFill = document.getElementById('progressFill');
                const progressBar = document.getElementById('progressBar');
                
                if (progressFill && this.currentText.length > 0) {
                    progressBar.style.display = 'block';
                    const progress = (this.currentIndex / this.currentText.length) * 100;
                    progressFill.style.width = progress + '%';
                }
            }

            sleep(ms) {
                return new Promise(resolve => setTimeout(resolve, ms));
            }
        }

        // Global functions for video controls
        function replayVideo() {
            const video = document.getElementById('aslVideo');
            video.currentTime = 0;
            video.play();
        }

        function slowVideo() {
            const video = document.getElementById('aslVideo');
            video.playbackRate = 0.5;
        }

        function normalVideo() {
            const video = document.getElementById('aslVideo');
            video.playbackRate = 1.0;
        }

        // Global function for quick phrase buttons
        function setPhrase(phrase) {
            document.getElementById('textInput').value = phrase;
            document.getElementById('translateBtn').disabled = false;
        }

        // Initialize the translator when page loads
        document.addEventListener('DOMContentLoaded', () => {
            new SignLanguageTranslator();
        });
    </script>
</body>
</html>